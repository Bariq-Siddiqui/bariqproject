(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{105:function(e,a,t){},195:function(e,a,t){},318:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(53),o=t.n(s),l=(t(195),t(5)),c=t(41),i=t(13),d=t(32),u=t.n(d),j=t(385),h=t(388),b=t(395),p=t(383),m=t(393),x=t(394),O=t(169),f=t.n(O),g=t(168),v=t.n(g),y=t(171),w=t.n(y),C=t(170),N=t.n(C),S=t(172),E=t.n(S),T=t(396),P=t(392),L=t(397),U=t(389),k=t(37),q=(t(105),t(386)),I=t(64),_=t(380),G=t(18),A=function(e,a){switch(a.type){case"USER_LOGIN":return a.payload.fullName&&a.payload.email&&a.payload.phone&&a.payload._id&&a.payload.address?Object(c.a)(Object(c.a)({},e),{},{user:a.payload}):(console.log("invalid data in USER_LOGIN reducer "),e);case"USER_LOGOUT":return Object(c.a)(Object(c.a)({},e),{},{user:null});default:return e}},B=t(2),R=Object(n.createContext)("Initial Value"),W={user:{}};function F(e){var a=e.children,t=Object(n.useReducer)(A,W),r=Object(i.a)(t,2),s=r[0],o=r[1];return Object(B.jsx)(R.Provider,{value:{state:s,dispatch:o},children:a})}var V="localhost"===window.location.hostname.split(":")[0]?"http://localhost:8000":"",D=k.a({email:k.b("Enter your email").email("Enter a valid email").required("Email is required"),password:k.b("Enter your password").min(8,"Password should be of minimum 8 characters length").max(10,"No more then 10").required("Password is required")});var J=function(){var e=Object(n.useContext)(R).dispatch,a=(Object(G.f)(),Object(I.a)({validationSchema:D,initialValues:{email:"",password:""},onSubmit:function(a){u.a.post("".concat(V,"/api/v1/login"),{email:a.email,password:a.password},{withCredentials:!0}).then((function(a){a&&(console.log("res: ",a.data.email),console.log("res: ",a.data.fullName),console.log("res: ",a.data.address),e({type:"USER_LOGIN",payload:{fullName:a.data.fullName,email:a.data.email,phone:a.data.phone,address:a.data.address,_id:a.data._id}}),alert("login successfull"))})).catch((function(e){alert("login unsuccessfull error found")}))}}));return Object(B.jsx)("div",{className:"login",children:Object(B.jsx)(q.a,{container:!0,spacing:2,alignItems:"center",textAlign:"center",padding:"2%",justifyContent:"center",children:Object(B.jsxs)(q.a,{item:!0,xs:11,sm:10,md:9,lg:8,children:[Object(B.jsx)("h1",{style:{color:"purple"},children:" LOG IN "}),Object(B.jsxs)("form",{onSubmit:a.handleSubmit,children:[Object(B.jsx)(_.a,{fullWidth:!0,color:"secondary",id:"outlined-basic",label:"Email",variant:"standard",type:"email",name:"email",value:a.values.email,onChange:a.handleChange,error:a.touched.email&&Boolean(a.errors.email),helperText:a.touched.email&&a.errors.email}),Object(B.jsx)(_.a,{fullWidth:!0,color:"secondary",type:"password",id:"filled-basic",label:"Password",variant:"standard",name:"password",value:a.values.password,onChange:a.handleChange,error:a.touched.password&&Boolean(a.errors.password),helperText:a.touched.password&&a.errors.password}),Object(B.jsx)("br",{}),Object(B.jsx)("br",{}),Object(B.jsx)(U.a,{variant:"contained",color:"secondary",type:"submit",children:"Log in"})]})]})})})},M="localhost"===window.location.hostname.split(":")[0]?"http://localhost:8000":"",z=k.a({fullName:k.b("Enter your Name").min(3,"Name should be of minimum 3 characters length").max(20,"No more then 20").required("Name is required"),email:k.b("Enter your email").email("Enter a valid email").required("Email is required"),phone:k.b("Enter your phone number").min(10,"Phone should be of minimum 10 length").max(11,"No more then 11 length").required("Phone number is required"),password:k.b("Enter your password").min(8,"Password should be of minimum 8 characters length").max(10,"No more then 10").required("Password is required"),address:k.b("Enter your address").min(3,"Address should be of minimum 3 characters length").max(20,"No more then 20").required("Address is required")});var K=function(){var e=Object(G.f)(),a=Object(I.a)({validationSchema:z,initialValues:{fullName:"",email:"",phone:"",password:"",address:""},onSubmit:function(a){u.a.post("".concat(M,"/api/v1/signup"),{fullName:a.fullName,email:a.email,phone:a.phone,password:a.password,address:a.address}).then((function(a){alert("SignUp Successfull"),e.push("/")})).catch((function(e){alert("Some thing went wrong please try with different email")}))}});return Object(B.jsx)("div",{className:"signup",children:Object(B.jsx)(q.a,{container:!0,spacing:2,alignItems:"center",textAlign:"center",padding:"2%",justifyContent:"center",children:Object(B.jsxs)(q.a,{item:!0,xs:11,sm:10,md:9,lg:8,children:[Object(B.jsx)("h1",{style:{color:"purple"},children:"  SIGN UP "}),Object(B.jsxs)("form",{onSubmit:a.handleSubmit,children:[Object(B.jsx)(_.a,{fullWidth:!0,color:"secondary",id:"outlined-basic",label:"Full Name",variant:"standard",name:"fullName",value:a.values.fullName,onChange:a.handleChange,error:a.touched.fullName&&Boolean(a.errors.fullName),helperText:a.touched.fullName&&a.errors.fullName}),Object(B.jsx)(_.a,{fullWidth:!0,color:"secondary",id:"outlined-basic",label:"Email",variant:"standard",type:"email",name:"email",value:a.values.email,onChange:a.handleChange,error:a.touched.email&&Boolean(a.errors.email),helperText:a.touched.email&&a.errors.email}),Object(B.jsx)(_.a,{fullWidth:!0,color:"secondary",id:"outlined-basic",label:"Phone Number",variant:"standard",type:"number",name:"phone",value:a.values.phone,onChange:a.handleChange,error:a.touched.phone&&Boolean(a.errors.phone),helperText:a.touched.phone&&a.errors.phone}),Object(B.jsx)(_.a,{fullWidth:!0,color:"secondary",type:"password",id:"filled-basic",label:"Password",variant:"standard",name:"password",value:a.values.password,onChange:a.handleChange,error:a.touched.password&&Boolean(a.errors.password),helperText:a.touched.password&&a.errors.password}),Object(B.jsx)(_.a,{fullWidth:!0,color:"secondary",id:"filled-basic",label:"Address",variant:"standard",type:"address",name:"address",value:a.values.address,onChange:a.handleChange,error:a.touched.address&&Boolean(a.errors.address),helperText:a.touched.address&&a.errors.address})," ",Object(B.jsx)("br",{}),Object(B.jsx)("br",{}),Object(B.jsx)(U.a,{variant:"contained",color:"secondary",type:"submit",children:"Sign Up"})]})]})})})},H=t(14),Q=t(175),X=t(4),Y=t(399),Z=t(400),$=t(401),ee=t(402),ae=t(387),te=t(390),ne=t(391),re=t(59),se=t(58),oe=t(60),le=t(111),ce=t.n(le),ie=t(112),de=t.n(ie),ue=t(167),je=t.n(ue),he=t(110),be=t.n(he),pe=["expand"];Object(X.a)((function(e){e.expand;var a=Object(Q.a)(e,pe);return Object(B.jsx)(te.a,Object(c.a)({},a))}))((function(e){var a=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:a.transitions.create("transform",{duration:a.transitions.duration.shortest})}}));function me(e){var a=e.text,t=e.email,r=e.fullName,s=(e.timestamp,n.useState(!1)),o=Object(i.a)(s,2);o[0],o[1];return Object(B.jsx)(q.a,{container:!0,spacing:2,alignItems:"center",textAlign:"center",padding:"2%",justifyContent:"center",children:Object(B.jsx)(q.a,{item:!0,xs:11,sm:9,md:7,lg:5,children:Object(B.jsxs)(Y.a,{children:[Object(B.jsx)(Z.a,{sx:{textAlign:"left"},avatar:Object(B.jsx)(ae.a,{sx:{bgcolor:re.a[500]},"aria-label":"recipe",children:r.slice(0,1)}),action:Object(B.jsx)(te.a,{"aria-label":"settings",children:Object(B.jsx)(je.a,{})}),title:r,subheader:t}),Object(B.jsx)($.a,{children:Object(B.jsx)(ne.a,{variant:"body2",color:"text.secondary",sx:{textAlign:"left"},children:a})}),Object(B.jsxs)(ee.a,{disableSpacing:!0,children:[Object(B.jsx)(te.a,{"aria-label":"share",children:Object(B.jsx)(be.a,{sx:{color:se.a[500]}})}),Object(B.jsx)(te.a,{"aria-label":"add to favorites",children:Object(B.jsx)(ce.a,{sx:{color:oe.a[500]}})}),Object(B.jsx)(te.a,{"aria-label":"share",children:Object(B.jsx)(de.a,{sx:{color:se.a[500]}})})]})]})})})}var xe="localhost"===window.location.hostname.split(":")[0]?"http://localhost:8000":"";var Oe=function(){var e=Object(n.useState)(""),a=Object(i.a)(e,2),t=(a[0],a[1],Object(n.useState)([])),r=Object(i.a)(t,2),s=r[0],o=r[1],l=Object(n.useState)(!1),c=Object(i.a)(l,2),d=c[0],j=c[1],h=Object(n.useState)(!0),b=Object(i.a)(h,2),p=b[0],m=b[1];Object(n.useEffect)((function(){u.a.get("".concat(xe,"/api/v1/posts?page=0"),{withCredentials:!0}).then((function(e){console.log("res +++: ",e.data),o(e.data)}))}),[d]);var x=Object(I.a)({initialValues:{post:""},onSubmit:function(e){u.a.post("".concat(xe,"/api/v1/post"),{postText:e.post},{withCredentials:!0}).then((function(e){console.log("res: ",e.data),j(!d),alert("post created")}))}}),O=Object(n.useContext)(R),f=(O.state,O.dispatch,Object(n.useState)({})),g=Object(i.a)(f,2);return g[0],g[1],Object(B.jsxs)("div",{className:"dashboard",children:[Object(B.jsx)(q.a,{container:!0,spacing:2,alignItems:"center",textAlign:"center",padding:"2%",justifyContent:"center",children:Object(B.jsxs)(q.a,{item:!0,xs:11,sm:10,md:9,lg:8,children:[Object(B.jsx)("h1",{style:{color:"purple"},children:" Create New Post "}),Object(B.jsxs)("form",{onSubmit:x.handleSubmit,children:[Object(B.jsx)(_.a,{fullWidth:!0,color:"secondary",id:"outlined-basic",label:"Post",variant:"standard",type:"TextField",name:"post",value:x.values.post,onChange:x.handleChange,error:x.touched.post&&Boolean(x.errors.post),helperText:x.touched.post&&x.errors.post}),Object(B.jsx)("br",{}),Object(B.jsx)("br",{}),Object(B.jsx)(U.a,{variant:"contained",color:"secondary",type:"submit",children:"Post"})]})]})}),Object(B.jsx)("br",{}),s.map((function(e,a){return Object(B.jsx)(me,{fullName:e.fullName,email:e.email,text:e.postText},a)})),Object(B.jsx)("br",{}),p?Object(B.jsx)(U.a,{onClick:function(){u.a.get("".concat(xe,"/api/v1/posts?page=").concat(s.length),{withCredentials:!0}).then((function(e){var a;if(console.log("res +++: ",e.data),null===(a=e.data)||void 0===a?void 0:a.length){var t=[].concat(Object(H.a)(s),Object(H.a)(e.data));o(t)}else m(!1)}))},children:"Load More"}):null]})},fe=t(119),ge=t.n(fe),ve=t(173),ye=t.n(ve),we=t.p+"static/media/splash.257ba1d2.png";var Ce=function(){return Object(B.jsx)(B.Fragment,{children:Object(B.jsx)("div",{style:{backgroundColor:"#181415",width:"100%",height:"100vh"},children:Object(B.jsx)("img",{style:{width:"100%",position:"fixed",bottom:"0px"},src:we,alt:""})})})},Ne="localhost"===window.location.hostname.split(":")[0]?"http://localhost:8000":"";var Se=function(){Object(n.useEffect)((function(){return u.a.get("".concat(Ne,"/api/v1/profile"),{withCredentials:!0}).then((function(e){console.log("res +++: ",e.data),q(e.data)})),u.a.get("".concat(Ne,"/api/v1/profile"),{withCredentials:!0}).then((function(e){console.log("res: ",e.data),e.data.email?y({type:"USER_LOGIN",payload:{fullName:e.data.fullName,email:e.data.email,_id:e.data._id}}):y({type:"USER_LOGOUT"})})).catch((function(e){y({type:"USER_LOGOUT"})})),function(){}}),[]);var e,a=n.useState({left:!1}),t=Object(i.a)(a,2),r=t[0],s=t[1],o=function(e,a){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&s(Object(c.a)(Object(c.a)({},r),{},Object(l.a)({},e,a)))}},d=Object(G.f)(),O=Object(n.useContext)(R),g=O.state,y=O.dispatch,C=Object(n.useState)({}),S=Object(i.a)(C,2),k=S[0],q=S[1];return Object(B.jsxs)("div",{className:"Appbar",children:[Object(B.jsx)(P.a,{sx:{flexGrow:1},children:Object(B.jsx)(T.a,{position:"static",color:"secondary",children:Object(B.jsxs)(L.a,{children:[Object(B.jsx)(te.a,{size:"large",edge:"start",color:"inherit","aria-label":"open drawer",sx:{mr:2},children:g.user?Object(B.jsxs)(n.Fragment,{children:[Object(B.jsx)(ge.a,{onClick:o("left",!0)}),Object(B.jsx)(j.a,{anchor:"left",open:r.left,onClose:o("left",!1),children:(e="left",Object(B.jsxs)(P.a,{sx:{width:"top"===e||"bottom"===e?"auto":290},role:"presentation",onClick:o(e,!1),onKeyDown:o(e,!1),children:[Object(B.jsx)(h.a,{children:[k.fullName,k.email,k.phone,k.address].map((function(e,a){return Object(B.jsxs)(p.a,{button:!0,children:[Object(B.jsx)(m.a,{children:2*a===0?Object(B.jsx)(v.a,{}):2*a===2?Object(B.jsx)(f.a,{}):2*a===4?Object(B.jsx)(N.a,{}):Object(B.jsx)(w.a,{})}),Object(B.jsx)(x.a,{primary:e})]},a)}))}),Object(B.jsx)(b.a,{}),Object(B.jsx)(h.a,{children:["Logout"].map((function(e,a){return Object(B.jsxs)(p.a,{button:!0,onClick:function(){u.a.post("".concat(Ne,"/api/v1/logout"),{},{withCredentials:!0}).then((function(e){console.log("res +++: ",e.data),y({type:"USER_LOGOUT"})}))},children:[Object(B.jsx)(m.a,{children:Object(B.jsx)(E.a,{})}),Object(B.jsx)(x.a,{primary:e})]},e)}))})]}))})]}):Object(B.jsx)(ge.a,{})}),Object(B.jsx)(ne.a,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1,display:{xs:"none",sm:"block"}},children:"Project"}),Object(B.jsx)(U.a,{color:"inherit",onClick:function(){d.push("/")},children:"Dashboard"}),Object(B.jsx)(U.a,{color:"inherit",onClick:function(){d.push("/signup")},children:"Signup"}),Object(B.jsx)(ye.a,{style:{font:"2rem"},onClick:function(){d.push("/")}})]})})}),void 0===g.user?Object(B.jsx)(G.c,{children:Object(B.jsx)(G.a,{exact:!0,path:"/",children:Object(B.jsx)(Ce,{})})}):null,null===g.user?Object(B.jsxs)(G.c,{children:[Object(B.jsx)(G.a,{exact:!0,path:"/",component:J}),Object(B.jsx)(G.a,{path:"/signup",component:K})]}):null,g.user?Object(B.jsx)(G.c,{children:Object(B.jsx)(G.a,{exact:!0,path:"/",children:Object(B.jsx)(Oe,{})})}):null]})};var Ee=function(){return Object(B.jsx)("div",{className:"App",children:Object(B.jsx)(Se,{})})},Te=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,404)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,s=a.getLCP,o=a.getTTFB;t(e),n(e),r(e),s(e),o(e)}))},Pe=t(61);o.a.render(Object(B.jsx)(r.a.StrictMode,{children:Object(B.jsx)(F,{children:Object(B.jsx)(Pe.a,{children:Object(B.jsx)(Ee,{})})})}),document.getElementById("root")),Te()}},[[318,1,2]]]);
//# sourceMappingURL=main.d11521e3.chunk.js.map